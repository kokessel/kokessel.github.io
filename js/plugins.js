;"use strict";var jQuery,figlet=figlet||function(){function e(e,t){var n,u,l,i,r={},a=[[16384,"vLayout",M],[8192,"vLayout",B],[4096,"vRule5",!0],[2048,"vRule4",!0],[1024,"vRule3",!0],[512,"vRule2",!0],[256,"vRule1",!0],[128,"hLayout",M],[64,"hLayout",B],[32,"hRule6",!0],[16,"hRule5",!0],[8,"hRule4",!0],[4,"hRule3",!0],[2,"hRule2",!0],[1,"hRule1",!0]];for(n=null!==t?t:e,u=0,l=a.length;l>u;)i=a[u],n>=i[0]?(n-=i[0],r[i[1]]="undefined"==typeof r[i[1]]?i[2]:r[i[1]]):"vLayout"!==i[1]&&"hLayout"!==i[1]&&(r[i[1]]=!1),u++;return"undefined"==typeof r.hLayout?r.hLayout=0===e?B:-1===e?k:r.hRule1||r.hRule2||r.hRule3||r.hRule4||r.hRule5||r.hRule6?w:M:r.hLayout===M&&(r.hRule1||r.hRule2||r.hRule3||r.hRule4||r.hRule5||r.hRule6)&&(r.hLayout=w),"undefined"==typeof r.vLayout?r.vLayout=r.vRule1||r.vRule2||r.vRule3||r.vRule4||r.vRule5?w:k:r.vLayout===M&&(r.vRule1||r.vRule2||r.vRule3||r.vRule4||r.vRule5)&&(r.vLayout=w),r}function t(e,t,n){return e===t&&e!==n?e:!1}function n(e,t){var n="|/\\[]{}()<>";if("_"===e){if(-1!==n.indexOf(t))return t}else if("_"===t&&-1!==n.indexOf(e))return e;return!1}function u(e,t){var n="| /\\ [] {} () <>",u=n.indexOf(e),l=n.indexOf(t);return-1!==u&&-1!==l&&u!==l&&1!==Math.abs(u-l)?n.substr(Math.max(u,l),1):!1}function l(e,t){var n="[] {} ()",u=n.indexOf(e),l=n.indexOf(t);return-1!==u&&-1!==l&&Math.abs(u-l)<=1?"|":!1}function i(e,t){var n="/\\ \\/ ><",u={0:"|",3:"Y",6:"X"},l=n.indexOf(e),i=n.indexOf(t);return-1!==l&&-1!==i&&i-l===1?u[l]:!1}function r(e,t,n){return e===n&&t===n?n:!1}function a(e,t){return e===t?e:!1}function f(e,t){var n="|/\\[]{}()<>";if("_"===e){if(-1!==n.indexOf(t))return t}else if("_"===t&&-1!==n.indexOf(e))return e;return!1}function o(e,t){var n="| /\\ [] {} () <>",u=n.indexOf(e),l=n.indexOf(t);return-1!==u&&-1!==l&&u!==l&&1!==Math.abs(u-l)?n.substr(Math.max(u,l),1):!1}function h(e,t){return"-"===e&&"_"===t||"_"===e&&"-"===t?"=":!1}function s(e,t){return"|"===e&&"|"===t?"|":!1}function R(e,t,n){return" "===t||""===t?e:t===n&&" "!==e?e:t}function v(e,t,n){if(n.fittingRules.vLayout===k)return"invalid";var u,l,i,r,R=Math.min(e.length,t.length),v=!1;if(0===R)return"invalid";for(u=0;R>u;u++)if(l=e.substr(u,1),i=t.substr(u,1)," "!==l&&" "!==i){if(n.fittingRules.vLayout===B)return"invalid";if(n.fittingRules.vLayout===M)return"end";if(s(l,i)){v=v||!1;continue}if(r=!1,r=n.fittingRules.vRule1?a(l,i):r,r=!r&&n.fittingRules.vRule2?f(l,i):r,r=!r&&n.fittingRules.vRule3?o(l,i):r,r=!r&&n.fittingRules.vRule4?h(l,i):r,v=!0,!r)return"invalid"}return v?"end":"valid"}function g(e,t,n){for(var u,l,i,r,a,f,o=e.length,h=e.length,s=(t.length,1);o>=s;){for(u=e.slice(Math.max(0,h-s),h),l=t.slice(0,Math.min(o,s)),i=l.length,f="",r=0;i>r;r++)if(a=v(u[r],l[r],n),"end"===a)f=a;else{if("invalid"===a){f=a;break}""===f&&(f="valid")}if("invalid"===f){s--;break}if("end"===f)break;"valid"===f&&s++}return Math.min(o,s)}function d(e,t,n){var u,l,i,r,v=Math.min(e.length,t.length),g="";for(u=0;v>u;u++)l=e.substr(u,1),i=t.substr(u,1)," "!==l&&" "!==i?n.fittingRules.vLayout===B?g+=R(l,i):n.fittingRules.vLayout===M?g+=R(l,i):(r=n.fittingRules.vRule5?s(l,i):r,r=!r&&n.fittingRules.vRule1?a(l,i):r,r=!r&&n.fittingRules.vRule2?f(l,i):r,r=!r&&n.fittingRules.vRule3?o(l,i):r,r=!r&&n.fittingRules.vRule4?h(l,i):r,g+=r):g+=R(l,i);return g}function c(e,t,n,u){var l,i,r,a,f=e.length,o=t.length,h=e.slice(0,Math.max(0,f-n)),s=e.slice(Math.max(0,f-n),f),R=t.slice(0,Math.min(n,o)),v=[],g=[];for(i=s.length,l=0;i>l;l++)r=l>=o?s[l]:d(s[l],R[l],u),v.push(r);return a=t.slice(Math.min(n,o),o),g.concat(h,v,a)}function y(e,t){var n,u=e.length,l="";for(n=0;t>n;n++)l+=" ";for(n=0;u>n;n++)e[n]+=l}function p(e,t,n){var u,l=e[0].length,i=t[0].length;return l>i?y(t,l-i):i>l&&y(e,i-l),u=g(e,t,n),c(e,t,u,n)}function m(e,a,f){if(f.fittingRules.hLayout===k)return 0;var o,h,s,R,v,g=e.length,d=a.length,c=g,y=1,p=!1,m=!1;if(0===g)return 0;e:for(;c>=y;){for(h=e.substr(g-y,y),s=a.substr(0,Math.min(y,d)),o=0;o<Math.min(y,d);o++)if(R=h.substr(o,1),v=s.substr(o,1)," "!==R&&" "!==v){if(f.fittingRules.hLayout===B){y-=1;break e}if(f.fittingRules.hLayout===M){(R===f.hardBlank||v===f.hardBlank)&&(y-=1);break e}if(p=!0,m=!1,m=f.fittingRules.hRule1?t(R,v,f.hardBlank):m,m=!m&&f.fittingRules.hRule2?n(R,v,f.hardBlank):m,m=!m&&f.fittingRules.hRule3?u(R,v,f.hardBlank):m,m=!m&&f.fittingRules.hRule4?l(R,v,f.hardBlank):m,m=!m&&f.fittingRules.hRule5?i(R,v,f.hardBlank):m,m=!m&&f.fittingRules.hRule6?r(R,v,f.hardBlank):m,!m){y-=1;break e}}if(p)break;y++}return Math.min(c,y)}function L(e,a,f,o){var h,s,v,g,d,c,y,p,m,L,b=[];for(h=0;h<o.height;h++){m=e[h],L=a[h],y=m.length,p=L.length,v=y-f,g=m.substr(0,Math.max(0,v)),d="";var x=m.substr(Math.max(0,y-f),f),k=L.substr(0,Math.min(f,p));for(s=0;f>s;s++){var w=y>s?x.substr(s,1):" ",O=p>s?k.substr(s,1):" ";if(" "!==w&&" "!==O)if(o.fittingRules.hLayout===B)d+=R(w,O,o.hardBlank);else if(o.fittingRules.hLayout===M)d+=R(w,O,o.hardBlank);else{var I="";I=!I&&o.fittingRules.hRule1?t(w,O,o.hardBlank):I,I=!I&&o.fittingRules.hRule2?n(w,O,o.hardBlank):I,I=!I&&o.fittingRules.hRule3?u(w,O,o.hardBlank):I,I=!I&&o.fittingRules.hRule4?l(w,O,o.hardBlank):I,I=!I&&o.fittingRules.hRule5?i(w,O,o.hardBlank):I,I=!I&&o.fittingRules.hRule6?r(w,O,o.hardBlank):I,I=I||R(w,O,o.hardBlank),d+=I}else d+=R(w,O,o.hardBlank)}c=f>=p?"":L.substr(f,Math.max(0,p-f)),b[h]=g+d+c}return b}function b(e,t,n){var u,l,i,r=0,a=[],f=n.height;for(i=0;f>i;i++)a[i]="";for(f=e.length,u=0;f>u;u++)if(l=t[e.substr(u,1).charCodeAt(0)]){if(n.fittingRules.hLayout!==k){for(r=1e4,i=0;i<n.height;i++)r=Math.min(r,m(a[i],l[i],n));r=1e4===r?0:r}a=L(a,l,r,n)}if(n.showHardBlanks!==!0)for(f=a.length,i=0;f>i;i++)a[i]=a[i].replace(new RegExp("\\"+n.hardBlank,"g")," ");return a}function x(e,t){var n,u,l=JSON.parse(JSON.stringify(e));if("undefined"!=typeof t.horizontalLayout){n=N(t.horizontalLayout,e);for(u in n)l.fittingRules[u]=n[u]}if("undefined"!=typeof t.verticalLayout){n=C(t.verticalLayout,e);for(u in n)l.fittingRules[u]=n[u]}return l.showHardBlanks=t.showHardBlanks||!1,l}var k=0,B=1,M=2,w=3,O={},I={font:"Standard",fontPath:"./fonts"},N=function(e,t){var n,u=["hLayout","hRule1","hRule2","hRule3","hRule4","hRule5","hRule6"],l={};if("default"===e)for(n=0;n<u.length;n++)l[u[n]]=t.fittingRules[u[n]];else if("full"===e)l={hLayout:k,hRule1:!1,hRule2:!1,hRule3:!1,hRule4:!1,hRule5:!1,hRule6:!1};else if("fitted"===e)l={hLayout:B,hRule1:!1,hRule2:!1,hRule3:!1,hRule4:!1,hRule5:!1,hRule6:!1};else if("controlled smushing"===e)l={hLayout:w,hRule1:!0,hRule2:!0,hRule3:!0,hRule4:!0,hRule5:!0,hRule6:!0};else{if("universal smushing"!==e)return;l={hLayout:M,hRule1:!1,hRule2:!1,hRule3:!1,hRule4:!1,hRule5:!1,hRule6:!1}}return l},C=function(e,t){var n,u=["vLayout","vRule1","vRule2","vRule3","vRule4","vRule5"],l={};if("default"===e)for(n=0;n<u.length;n++)l[u[n]]=t.fittingRules[u[n]];else if("full"===e)l={vLayout:k,vRule1:!1,vRule2:!1,vRule3:!1,vRule4:!1,vRule5:!1};else if("fitted"===e)l={vLayout:B,vRule1:!1,vRule2:!1,vRule3:!1,vRule4:!1,vRule5:!1};else if("controlled smushing"===e)l={vLayout:w,vRule1:!0,vRule2:!0,vRule3:!0,vRule4:!0,vRule5:!0};else{if("universal smushing"!==e)return;l={vLayout:M,vRule1:!1,vRule2:!1,vRule3:!1,vRule4:!1,vRule5:!1}}return l},F=function(e,t,n){n=n.replace(/\r\n/g,"\n").replace(/\r/g,"\n");var u,l,i,r=n.split("\n"),a=[];for(l=r.length,u=0;l>u;u++)a.push(b(r[u],O[e],t));for(l=a.length,i=a[0],u=1;l>u;u++)i=p(i,a[u],t);return i.join("\n")},j=function(e,t,n){j.text(e,t,n)};return j.textSync=function(e,t){var n="";e+="","string"==typeof t?(n=t,t={}):(t=t||{},n=t.font||I.font);var u=x(j.loadFontSync(n),t);return F(n,u,e)},j.text=function(e,t,n){var u="";e+="","function"==typeof arguments[1]&&(n=t,t={},t.font=I.font),"string"==typeof t?(u=t,t={}):(t=t||{},u=t.font||I.font),j.loadFont(u,function(l,i){return l?n(l):void n(null,F(u,x(i,t),e))})},j.metadata=function(e,t){e+="",j.loadFont(e,function(n,u){return n?void t(n):void t(null,u,O[e].comment)})},j.defaults=function(e){if("object"==typeof e&&null!==e)for(var t in e)e.hasOwnProperty(t)&&(I[t]=e[t]);return JSON.parse(JSON.stringify(I))},j.parseFont=function(t,n){n=n.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),O[t]={};var u=n.split("\n"),l=u.splice(0,1)[0].split(" "),i=O[t],r={};if(r.hardBlank=l[0].substr(5,1),r.height=parseInt(l[1],10),r.baseline=parseInt(l[2],10),r.maxLength=parseInt(l[3],10),r.oldLayout=parseInt(l[4],10),r.numCommentLines=parseInt(l[5],10),r.printDirection=l.length>=6?parseInt(l[6],10):0,r.fullLayout=l.length>=7?parseInt(l[7],10):null,r.codeTagCount=l.length>=8?parseInt(l[8],10):null,r.fittingRules=e(r.oldLayout,r.fullLayout),i.options=r,1!==r.hardBlank.length||isNaN(r.height)||isNaN(r.baseline)||isNaN(r.maxLength)||isNaN(r.oldLayout)||isNaN(r.numCommentLines))throw new Error("FIGlet header contains invalid values.");var a,f=[];for(a=32;126>=a;a++)f.push(a);if(f=f.concat(196,214,220,228,246,252,223),u.length<r.numCommentLines+r.height*f.length)throw new Error("FIGlet file is missing data.");var o,h,s=!1;for(i.comment=u.splice(0,r.numCommentLines).join("\n"),i.numChars=0;u.length>0&&i.numChars<f.length;){for(o=f[i.numChars],i[o]=u.splice(0,r.height),a=0;a<r.height;a++)"undefined"==typeof i[o][a]?i[o][a]="":(h=new RegExp("\\"+i[o][a].substr(i[o][a].length-1,1)+"+$"),i[o][a]=i[o][a].replace(h,""));i.numChars++}for(;u.length>0;){if(o=u.splice(0,1)[0].split(" ")[0],/^0[xX][0-9a-fA-F]+$/.test(o))o=parseInt(o,16);else if(/^0[0-7]+$/.test(o))o=parseInt(o,8);else if(/^[0-9]+$/.test(o))o=parseInt(o,10);else{if(!/^-0[xX][0-9a-fA-F]+$/.test(o)){if(""===o)break;console.log("Invalid data:"+o),s=!0;break}o=parseInt(o,16)}for(i[o]=u.splice(0,r.height),a=0;a<r.height;a++)"undefined"==typeof i[o][a]?i[o][a]="":(h=new RegExp("\\"+i[o][a].substr(i[o][a].length-1,1)+"+$"),i[o][a]=i[o][a].replace(h,""));i.numChars++}if(s===!0)throw new Error("Error parsing data.");return r},j.loadFont=function(e,t){if(O[e])return void t(null,O[e].options);if("undefined"==typeof jQuery)throw new Error("jQuery is required for ajax method to work.");jQuery.ajax({url:I.fontPath+"/"+e+".flf",dataType:"text",success:function(n){try{t(null,j.parseFont(e,n))}catch(u){t(u)}},error:function(){t(arguments)}})},j.loadFontSync=function(){throw new Error("synchronous font loading is not implemented for the browser")},j}();"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=figlet);